<div class="mx-auto flex w-full max-w-7xl flex-col gap-12 px-4 py-8 sm:px-6 lg:px-8">
  @if (categories$ | async; as categories) {
    <section [class]="'grid gap-4 ' + categoryGridClasses(categories.length)">
      @for (category of categories; track category.key; let i = $index) {
        <a
          [routerLink]="category.route"
          [class]="
            'group rounded-xl border border-slate-200 bg-white p-5 shadow-sm transition hover:-translate-y-0.5 hover:border-slate-300 hover:shadow-md '
            + categoryCardClasses(i, categories.length)
          "
        >
          <p class="text-xs font-semibold uppercase tracking-wide text-slate-500">Category</p>
          <h2 class="mt-2 text-xl font-semibold text-slate-900">{{ category.name }}</h2>
          <p class="mt-1 text-sm text-slate-600">{{ category.description }}</p>
          <p class="mt-4 text-sm font-medium text-blue-600 group-hover:text-blue-700">Shop now</p>
        </a>
      }
    </section>
  } @else {
    <section class="grid grid-cols-1 gap-4 sm:grid-cols-2">
      @for (item of [1, 2, 3, 4]; track item) {
        <article class="rounded-xl border border-slate-200 bg-white p-5 shadow-sm">
          <div class="h-3 w-20 animate-pulse rounded bg-slate-200"></div>
          <div class="mt-4 h-6 w-28 animate-pulse rounded bg-slate-200"></div>
          <div class="mt-3 h-4 w-36 animate-pulse rounded bg-slate-200"></div>
        </article>
      }
    </section>
  }

  <section class="space-y-4">
    <div class="flex items-end justify-between gap-4">
      <h2 class="text-2xl font-semibold tracking-tight text-slate-900">Spotlight</h2>
      <div class="flex items-center gap-3">
        <a routerLink="/products" class="text-sm font-medium text-blue-600 hover:text-blue-700">View collection</a>
        <div class="flex items-center gap-2">
          <button
            type="button"
            (click)="prevSlide()"
            class="inline-flex h-8 w-8 items-center justify-center rounded-full border border-slate-300 bg-white text-slate-700 transition hover:bg-slate-50"
            aria-label="Previous spotlight slide"
          >
            ‹
          </button>
          <button
            type="button"
            (click)="nextSlide()"
            class="inline-flex h-8 w-8 items-center justify-center rounded-full border border-slate-300 bg-white text-slate-700 transition hover:bg-slate-50"
            aria-label="Next spotlight slide"
          >
            ›
          </button>
        </div>
      </div>
    </div>

    <div class="overflow-hidden rounded-2xl">
      <article class="rounded-2xl bg-slate-900 p-6 text-white">
        <p class="text-sm text-slate-300">{{ activeSlide.subtitle }}</p>
        <h3 class="mt-2 text-2xl font-semibold tracking-tight">{{ activeSlide.title }}</h3>
        <a routerLink="/products" class="mt-5 inline-block rounded-md bg-white px-4 py-2 text-sm font-semibold text-slate-900 hover:bg-slate-200">
          Explore
        </a>
      </article>
    </div>

    <div class="flex items-center justify-center gap-2">
      @for (slide of carouselSlides; track slide.title; let i = $index) {
        <button
          type="button"
          (click)="goToSlide(i)"
          class="h-2.5 w-2.5 rounded-full transition"
          [class.bg-slate-900]="i === activeSlideIndex"
          [class.bg-slate-300]="i !== activeSlideIndex"
          [attr.aria-label]="'Go to spotlight slide ' + (i + 1)"
        ></button>
      }
    </div>
  </section>

  <section>
    <app-product-list [showTitle]="true" sectionTitle="Trending Products"></app-product-list>
  </section>

  <section class="grid gap-4 md:grid-cols-3">
    <article class="rounded-xl border border-slate-200 bg-white p-5 shadow-sm">
      <h3 class="text-lg font-semibold text-slate-900">Hot Trend</h3>
      <ul class="mt-3 space-y-2 text-sm text-slate-700">
        @for (item of hotTrend; track item) {
          <li>{{ item }}</li>
        }
      </ul>
    </article>

    <article class="rounded-xl border border-slate-200 bg-white p-5 shadow-sm">
      <h3 class="text-lg font-semibold text-slate-900">Best Seller</h3>
      <ul class="mt-3 space-y-2 text-sm text-slate-700">
        @for (item of bestSeller; track item) {
          <li>{{ item }}</li>
        }
      </ul>
    </article>

    <article class="rounded-xl border border-slate-200 bg-white p-5 shadow-sm">
      <h3 class="text-lg font-semibold text-slate-900">Feature</h3>
      <ul class="mt-3 space-y-2 text-sm text-slate-700">
        @for (item of featured; track item) {
          <li>{{ item }}</li>
        }
      </ul>
    </article>
  </section>
</div>
